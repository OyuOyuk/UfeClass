<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img{
            width :4vw;
        }
        .horse{
            width: 10vw;
        }
         td, th, tr{

            width: 10vw
        }
       #finishline {
            width: 1vw;
            height: 100%;     /* add this */
            overflow: hidden;
            background-image: url(checkerboard.jpg);
        }

        #finishlineimg {
            width: 100%;
            height: 100%;
            object-fit: cover;   /* this makes the checkerboard fill the whole box */
        }

        .line{
            background-color: black;
            background-size: 1vh 1vh;  /* smaller pattern */
            background-repeat: repeat-y; /* repeat vertically */
            background-position: center;    
            border: solid white;
        }
    </style>
</head>
<body>
    <script>
        let op1 = "goat.jpg"
        let op2 = "horse.jpg"
        let op3 = "camel.jpg"
        let op4 = "sheep.jpg"
        let options = [op1, op2, op3, op4]
        let turn = 0
        let pos1 = 0
        let pos2 = 0
        let win = false
        function reset(){
            win = false
            document.getElementById("winner_place").innerText = "No winner yet";    
            horse1 = document.getElementById("player1");
            horse2 = document.getElementById("player2");
            horse1.parentElement.innerHTML = ""; 
            horse2.parentElement.innerHTML = ""; 
            turn = 0;
            pos1 = 0;
            pos2 = 0;
            document.getElementById("p1_0").appendChild(horse1);
            document.getElementById("p2_0").appendChild(horse2);
        }
        function randomize() {
            if(win == false){
                let n1 = parseInt(Math.random() * 4);
                let n2 = parseInt(Math.random() * 4);
                let n3 = parseInt(Math.random() * 4);
                let n4 = parseInt(Math.random() * 4);
                let n = [n1, n2, n3, n4]
                shagai1.src = options[n1];
                shagai2.src = options[n2];
                shagai3.src = options[n3];
                shagai4.src = options[n4];
                let count = 0
                for(let i = 0; i < 4 ; i++){
                    if(n[i] == 1){
                        count++;
                    }
                }
                if(count != 0){
                if (turn % 2 === 0 ) {
                    
                    pos1 = pos1 + count ;
                    moveHorse("player1", pos1);
                } else {
                
                    pos2 = pos2 + count;
                    moveHorse("player2", pos2);
                }}

                if(pos1 >= 8 || pos2 >= 8){
                    if(pos1 >= 8){
                        document.getElementById("winner_place").innerText = "Player 1 has won";
                    }else if(pos2 >= 8){
                        document.getElementById("winner_place").innerText = "Player 2 has won";
                    }
                    win = true
                }

                turn++;
            }}
        function getRowPrefix(player) {
            return player === "player1" ? "p1" : "p2";
        }


        function moveHorse(player, position){
            let horse = document.getElementById(player);
            let row = getRowPrefix(player);

            let safePos = Math.min(position, 8);

            if (safePos > 0) {
                let prev = document.getElementById(row + "_" + (safePos - 1));
                if (prev) prev.innerHTML = "";
            } else {
                horse.parentElement.innerHTML = ""; 
            }

            document.getElementById(row + "_" + safePos).appendChild(horse);
        }


    </script>
    <table>
        <tr>
            <th colspan="2">
                <img src="goat.jpg" alt="1" id="shagai1">
                <img src="horse.jpg" alt="2" id="shagai2">
                <img src="camel.jpg" alt="3" id="shagai3">
                <img src="sheep.jpg" alt="4" id="shagai4">
            </th>
            <th colspan="2">
                <button onclick="randomize()">Шагай орхих</button>
            </th>
            <th colspan="2">
                <button onclick="reset()">Reset</button>
            </th>
            <th colspan="3"></th>
            <th rowspan="4" id="finishline"> </th>
            <th></th>
        </tr>
        <tr id = "p1">
            <td>Тоглогч 1</td>
            <td id = "p1_0"> <img src="horse.png" alt="" class="horse" id="player1"></td>
            <td id = "p1_1"></td>
            <td id = "p1_2"></td>
            
            <td id = "p1_3"></td>
            <td id = "p1_4"></td>
            <td id = "p1_5"></td>
            <td id = "p1_6"></td>
            <td id = "p1_7"></td>

            <td id = "p1_8"> </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td class="line"></td>
            <td class="line"></td>
            
            <td class="line"></td>
            <td class="line"></td>
            <td class="line"></td>
            <td class="line"></td>
            <td class="line"></td>


            <td class="line"></td>
        </tr>
        <tr id = "p2">
            <td>Тоглогч 2</td>
            <td id = "p2_0"> <img src="horse.png" alt="" class="horse" id="player2"></td>
            <td id = "p2_1"></td>
            <td id = "p2_2"></td>
            
            <td id = "p2_3"></td>
            <td id = "p2_4"> </td>
            <td id = "p2_5"></td>
            <td id = "p2_6"> </td>
            <td id = "p2_7"> </td>


            <td id = "p2_8"></td>
        </tr>
    </table>
    <p id="winner_place">No winner yet</p>
</body>
</html>